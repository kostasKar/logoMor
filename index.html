<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
  <title>LogoMor</title>
  <link rel='shortcut icon' type='image/x-icon' href='favicon.png'>
  <meta charset="utf-8">

  <!--Online resources-->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css">
  <script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.min.js"></script>

  <!--Local scripts -->
  <script src="logomorApp.js"><</script>
  <script src="argumentResolverTask.js"></script>
  <script src="commandTasks.js"></script>
  <script src="parenthesisTask.js"></script>
  <script src="variableMakerTask.js"></script>
  <script src="staticVariableMaker.js"></script>
  <script src="instructionsBlockTask.js"></script>
  <script src="ifTask.js"></script>
  <script src="ifElseTask.js"></script>
  <script src="repeatTask.js"></script>
  <script src="whileTask.js"></script>
  <script src="untilTask.js"></script>
  <script src="procedurePrototype.js"></script>
  <script src="procedureTask.js"></script>
  <script src="variablesSliders.js"></script>
  <script src="logomorCommands.js"></script>
  <script src="codemirrorLogomor/lib/codemirror.js"></script>
  <script src="codemirrorLogomor/mode/logomor/logomor.js"></script>
  <script src="codemirrorLogomor/addon/edit/matchbrackets.js"></script>
  <script src="codemirrorLogomor/addon/edit/closebrackets.js"></script>
  <script src="codemirrorLogomor/addon/selection/active-line.js"></script>
  <script src="codemirrorLogomor/addon/search/match-highlighter.js"></script>
  <script src="codemirrorLogomor/addon/search/matchesonscrollbar.js"></script>
  <script src="codemirrorLogomor/addon/scroll/annotatescrollbar.js"></script>
  <script src="codemirrorLogomor/addon/scroll/simplescrollbars.js"></script>
  <script src="codemirrorLogomor/addon/search/searchcursor.js"></script>
  <script src="codemirrorLogomor/addon/hint/show-hint.js"></script>
  <script src="codemirrorLogomor/addon/hover/text-hover.js"></script>
  <script src="codemirrorLogomor/addon/hover/token-hover.js"></script>
  <script src="codemirrorLogomor/addon/display/placeholder.js"></script>
  <script src="codemirrorLogomor/addon/comment/comment.js"></script>
  <script src="cameraManipulation.js"></script>
  <script src="drawThings.js"></script>
  <script src="logoMatrixTransformations.js"></script>
  <script src="debugger.js"></script>
  <script src='logoParser.js'></script>
  <script src='memoryController.js'></script>
  <script src="logoInterpreter.js"></script>
  <script src="sketchBuffer.js"></script>
  <script src="stlCreator.js"></script>
  <script src="retainMode.js"></script>
  <script src="logoCommands.js"></script>
  <script src="randomGenerator.js"></script>
  <script src="demoProgram.js"></script>
  <script src="localFileSourceCode.js"></script>
  <script src="output.js"></script>
  <script src="error.js"></script>
  <script src="model.js"></script>
  <script src="image.js"></script>
  <script src="sound.js"></script>
  <script src="waitHandler.js"></script>
  <script src="seedrandom.min.js"></script>
  <script src="sketch.js"></script>
  <script src="codeEditorConfiguration.js" defer></script>


  <!--Stylesheets-->
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="stylesheet" href="codemirrorLogomor/addon/hover/text-hover.css">
  <link rel="stylesheet" href="codemirrorLogomor/addon/hint/show-hint.css">
  <link rel="stylesheet" href="codemirrorLogomor/addon/display/fullscreen.css">
  <link href="codemirrorLogomor/addon/scroll/simplescrollbars.css" rel="stylesheet">
  <link href="codemirrorLogomor/lib/codemirror.css" rel="stylesheet">
  <link href="codemirrorLogomor/theme/logomor-theme.css" rel="stylesheet">


</head>
<body>

  <div id="p5_loading"></div>
  <div id="CameraInstructions" class="subtleText1">
    <image id="logoIcon" src="favicon.png"></image>
    <h1 class="brightText"> <span class="bigger">L</span>OGO<span class="bigger">M</span>OR</h1>
    <h2 class="brightText">3D Logo Interpreter</h2>
    <label>Left Click: Rotate </label> 
    <label>Middle Click: Pan </label> 
    <label>Scroll Wheel: Zoom </label>
    <label>Double Click: Reset View</label>
    <label title="Static sketches automatically enable high speed rendering" id="retainModeLabel">Retained Mode: <span id="retainModeValue">On</span></label>
    <label id="fpsLabel">Fps: <span id="fpsValue"></span></label>
    <div class="onoffswitch tooltip">
      <span class="tooltiptext right">Auto-Rotate</span>    
      <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="autoRotate" tabindex="0">
      <label class="onoffswitch-label" for="autoRotate">
        <span class="onoffswitch-inner"></span>
        <span class="onoffswitch-switch"></span>
      </label>
    </div>
    <div class="onoffswitch tooltip">
      <span class="tooltiptext right">Rotation arrows</span>    
      <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="turnsHelpArrows" tabindex="0">
      <label class="onoffswitch-label" for="turnsHelpArrows">
        <span class="onoffswitch-inner"></span>
        <span class="onoffswitch-switch"></span>
      </label>
    </div>
    <div class="onoffswitch tooltip">
      <span class="tooltiptext right">Avatar view</span>    
      <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="avatarViewCheckbox" tabindex="0">
      <label class="onoffswitch-label" for="avatarViewCheckbox">
        <span class="onoffswitch-inner"></span>
        <span class="onoffswitch-switch"></span>
      </label>
    </div>
    <button class="tooltip" id="fullscreenButton" onclick="LM.p5Renderer.fullscreen(!LM.p5Renderer.fullscreen())">
      <i class="fa fa-expand" aria-hidden="true"></i>
      <span class="tooltiptext right">Fullscreen</span>
    </button>
  </div>

  <div id="copyright" class="subtleText2">&copy; 2021 Kostas Karouzos 
    <a href = "mailto: &#099;&#107;&#046;&#107;&#097;&#114;&#111;&#117;&#122;&#111;&#115;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;">&#099;&#107;&#046;&#107;&#097;&#114;&#111;&#117;&#122;&#111;&#115;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;</a>
    <a href="https://github.com/kostasKar/logoMor" class="fab fa-github" target="_blank"></a>
  </div> 

  <div id="drawCanvas"></div>

  <div id ="controlsColumnScroll">
    <div id="controlsColumn">

      <div id="sourceCodeEditorTitleDiv">
        <label class="areaTitle brightText">Source Code Editor</label>
        <button title="Create a shareable link with the source code" class="editorButton" id="copyCodeButton" onclick="LM.codeMirror.copyShareableSourceCodeLink()">Share</button>
        <button title="Increase editor font size" class="editorButton" onclick="LM.codeMirror.increaseEditorFontSize()"><i class="fa fa-plus" aria-hidden="true"></i></button>
        <button title="Decrease editor font size" class="editorButton" onclick="LM.codeMirror.decreaseEditorFontSize()"><i class="fa fa-minus" aria-hidden="true"></i></button>
      </div>

      <div id="sourceCodeContainer">
        <textarea class="codeFont brightText" id="sourceCodeTextArea" spellcheck="false" placeholder="Logo code here...&#13;&#10;Press 'Demo' to load random example programs"></textarea>
      </div>
      <div id="pull-tab"></div>

      <div class="areaDiv" id="movesLimitDiv">
        <button title="Start debugging" class="debugControls" id="debugButton" onclick="LM.interpreter.setup(null, true)">Debug</button>
        <button title="Run to breakpoint" class="debugControls" id="debugContinueButton" onclick="LM.debugger.continuePressed()" disabled>Continue</button>
        <button title="Run next command" class="debugControls" id="debugStepButton" onclick="LM.debugger.stepPressed()" disabled>Step</button>
        <input  id="movesLimitInput" type="number" name="quantity" min="0" placeholder="Infinite" onchange="LM.interpreter.movesLimit = this.value || Infinity; LM.retainMode.fireExecution()">
        <label title="Maximum number of move commands per frame" class="subtleText1" id="movesLimitLabel">Moves Limit:</label>
      </div>

      <div class="areaDiv" id = "buttonDiv">
        <button id="playButton" onclick="LM.interpreter.setup()">Run</button><!-- just to get rid of the space between the inline-blocks
        --><button id="stopButton" onclick="LM.interpreter.setup(''); LM.sounds.stopAllAudio()">Stop</button><!--
        --><button type="button" id="saveButton" onclick="LM.localSystem.download()">Save</button><!--
        --><button onclick="LM.localSystem.openFile()">Load</button><!--
        --><button onclick=" window.open('assets/Documentation.pdf','_blank')" type="button">Help</button><!--
        --><button type="button" id="DemoButton" onclick="LM.codeMirror.setValue(LM.demoPrograms.getRandomDemo());LM.interpreter.setup();localStorage.setItem('demoPressed', true);this.classList.remove('firstVisitBlink');">Demo</button>
        <input id="inp" type='file' style="display:none;" onchange="LM.localSystem.readFile(event)" onclick="this.value=null;" />
      </div>

      <div class="areaDiv">
        <label title="Program output (print command), system and error messages dispayed here" class="areaTitle brightText">Console</label>
        <div readonly id="consoleTextArea" class="codeFont brightText"></div>
      </div>

      <div class="areaDiv" id="variablesDiv">
        <label title="Manipulate the initial value of any global variable defined in the source code. Changes can be observed on the drawing in real time" class="areaTitle brightText" id="variablesTitle">Variables Manipulators</label>
        <div class="dropdown">
          <button id="slidersAddButton" onclick="LM.variableManipulatorsSliders.showVariablesNames()" class="dropbtn" disabled>Add</button>
          <button id="slidersClearButton" onclick="LM.variableManipulatorsSliders.clearSliders()" class="dropbtn" disabled>Clear</button>
          <div id="variablesNamesDropdown" class="dropdown-content">
          </div>
        </div>
      </div>

      <div class="areaDiv" id="modelsDiv">
        <label title="Import an .stl or .obj 3D model file from local disk" class="areaTitle brightText">Models</label>
        <button id="modelsAddButton" onclick="LM.models.openModelFile()" class="dropbtn">Add</button>
        <input id="modelinp" type='file' style="display:none;" onchange="LM.models.readModelFile(event)" onclick="this.value=null;" accept=".stl,.obj" />
      </div>

      <div class="areaDiv" id="imagesDiv">
        <label title="Import any image file from local disk" class="areaTitle brightText">Images</label>
        <button id="imagesAddButton" onclick="LM.images.openImageFile()" class="dropbtn">Add</button>
        <input id="imageinp" type='file' style="display:none;" onchange="LM.images.readImageFile(event)" onclick="this.value=null;" accept="image/*"/>
      </div>

      <div class="areaDiv" id="soundsDiv">
        <label title="Import any audio file from local disk" class="areaTitle brightText">Sounds</label>
        <button id="soundAddButton" onclick="LM.sounds.openSoundFile()" class="dropbtn">Add</button>
        <input id="soundinp" type='file' style="display:none;" onchange="LM.sounds.readSoundFile(event)" onclick="this.value=null;" accept="audio/*"/>
      </div>


    </div>
  </div>


  <div id="pictureControl">
    <button class="tooltip" id="saveScreenshot" onclick="LM.localSystem.saveScreenshot()">
      <i class="fa fa-camera" aria-hidden="true"></i>
      <span class="tooltiptext left">Screenshot</span>
    </button>
    <button class="tooltip" id="record" onclick="LM.localSystem.toggleRecording()">
      <i class="fa fa-video" aria-hidden="true"></i>
      <span class="tooltiptext left">Video</span>
    </button>
    <button class="tooltip" id="exportToSTLButton" onclick="LM.stlCreator.createASCIISTL()">
      <i class="fas fa-industry" aria-hidden="true"></i>
      <span class="tooltiptext left">Export to STL</span>
    </button>
    <button class="tooltip" id="pause" onclick="LM.retainMode.togglePause()">
      <i class="fa fa-pause" aria-hidden="true"></i>
      <span class="tooltiptext left">Redrawing</span>
    </button>
    <button class="tooltip" id="clearDrawing" onclick="LM.p5Renderer.toggleClearDrawing()">
      <i class="fas fa-clone" aria-hidden="true"></i>
      <span class="tooltiptext left">Persist draw</span>
    </button>
    <button class="tooltip" id="colorPickerButton" onclick="document.getElementById('colorPicker').click()">
      <i class="fas fa-paint-brush" id="paintBrushIcon" aria-hidden="true"></i>
      <span class="tooltiptext left">Default color</span>
    </button>
    <input id="colorPicker" type="color" value="#ffffff" style="visibility: hidden; width: 0px;" onchange="LM.logo.setDefaultHexColor(this.value); document.getElementById('paintBrushIcon').style.color = this.value;"/>
  </div>


  <script>
    if((localStorage.getItem("demoPressed") === null) && (!window.location.search.includes("code"))){
      document.getElementById("DemoButton").classList.add("firstVisitBlink");
    }
  </script>


</body>
</html>