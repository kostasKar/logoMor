<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
  <title>LogoMor</title>
  <link rel='shortcut icon' type='image/x-icon' href='favicon.png'>
  <meta charset="utf-8">

  <!--Online resources-->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css">
  <script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.min.js"></script>

  <!--Local scripts -->
  <script src="logomorApp.js"><</script>
  <script src="argumentResolverTask.js"></script>
  <script src="commandTasks.js"></script>
  <script src="parenthesisTask.js"></script>
  <script src="variableMakerTask.js"></script>
  <script src="staticVariableMaker.js"></script>
  <script src="instructionsBlockTask.js"></script>
  <script src="ifTask.js"></script>
  <script src="ifElseTask.js"></script>
  <script src="repeatTask.js"></script>
  <script src="whileTask.js"></script>
  <script src="untilTask.js"></script>
  <script src="procedurePrototype.js"></script>
  <script src="procedureTask.js"></script>
  <script src="variablesSliders.js"></script>
  <script src="logomorCommands.js"></script>
  <script src="codemirrorLogomor/lib/codemirror.js"></script>
  <script src="codemirrorLogomor/mode/logomor/logomor.js"></script>
  <script src="codemirrorLogomor/addon/edit/matchbrackets.js"></script>
  <script src="codemirrorLogomor/addon/edit/closebrackets.js"></script>
  <script src="codemirrorLogomor/addon/selection/active-line.js"></script>
  <script src="codemirrorLogomor/addon/search/match-highlighter.js"></script>
  <script src="codemirrorLogomor/addon/search/matchesonscrollbar.js"></script>
  <script src="codemirrorLogomor/addon/scroll/annotatescrollbar.js"></script>
  <script src="codemirrorLogomor/addon/scroll/simplescrollbars.js"></script>
  <script src="codemirrorLogomor/addon/search/searchcursor.js"></script>
  <script src="codemirrorLogomor/addon/hint/show-hint.js"></script>
  <script src="codemirrorLogomor/addon/hover/text-hover.js"></script>
  <script src="codemirrorLogomor/addon/hover/token-hover.js"></script>
  <script src="codemirrorLogomor/addon/display/placeholder.js"></script>
  <script src="codemirrorLogomor/addon/comment/comment.js"></script>
  <script src="cameraManipulation.js"></script>
  <script src="drawThings.js"></script>
  <script src="logoMatrixTransformations.js"></script>
  <script src="debugger.js"></script>
  <script src='logoParser.js'></script>
  <script src='memoryController.js'></script>
  <script src="logoInterpreter.js"></script>
  <script src="sketchBuffer.js"></script>
  <script src="stlCreator.js"></script>
  <script src="retainMode.js"></script>
  <script src="logoCommands.js"></script>
  <script src="randomGenerator.js"></script>
  <script src="demoProgram.js"></script>
  <script src="localFileSourceCode.js"></script>
  <script src="output.js"></script>
  <script src="error.js"></script>
  <script src="model.js"></script>
  <script src="image.js"></script>
  <script src="sound.js"></script>
  <script src="waitHandler.js"></script>
  <script src="seedrandom.min.js"></script>
  <script src="positionInfo.js"></script>
  <script src="sketch.js"></script>
  <script src="codeEditorConfiguration.js" defer></script>


  <!--Stylesheets-->
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="stylesheet" href="codemirrorLogomor/addon/hover/text-hover.css">
  <link rel="stylesheet" href="codemirrorLogomor/addon/hint/show-hint.css">
  <link rel="stylesheet" href="codemirrorLogomor/addon/display/fullscreen.css">
  <link href="codemirrorLogomor/addon/scroll/simplescrollbars.css" rel="stylesheet">
  <link href="codemirrorLogomor/lib/codemirror.css" rel="stylesheet">
  <link href="codemirrorLogomor/theme/logomor-theme.css" rel="stylesheet">


</head>
<body>













<div id="p5_loading"></div>
<div id="CameraInstructions" class="subtleText1">
  <image id="logoIcon" src="favicon.png"></image>
  <h1 class="brightText"> <span class="bigger">L</span>OGO<span class="bigger">M</span>OR</h1>
  <h2 class="brightText">3D Logo Interpreter</h2>
  <label>Left Click: Rotate </label>
  <label>Middle Click: Pan </label>
  <label>Scroll Wheel: Zoom </label>
  <label>Double Click: Reset View</label>
  <label title="Static sketches automatically enable high speed rendering" id="retainModeLabel">Retained Mode: <span id="retainModeValue">On</span></label>
  <label id="fpsLabel">Fps: <span id="fpsValue"></span></label>
</div>

<div id="copyright" class="subtleText2">&copy; 2022 Kostas Karouzos
  <a href = "mailto: &#099;&#107;&#046;&#107;&#097;&#114;&#111;&#117;&#122;&#111;&#115;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;">&#099;&#107;&#046;&#107;&#097;&#114;&#111;&#117;&#122;&#111;&#115;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;</a>
  <a href="https://github.com/kostasKar/logoMor" class="fab fa-github" target="_blank"></a>
</div>

<div id="drawCanvas"></div>

<div id ="controlsColumnScroll">
  <div id="controlsColumn" class="rtl">

    <div id="menubar" class="brightText">
      <div class="menu-dropdown">
        <div class="menu-dropdown-button">File</div>
        <div class="menu-dropdown-content">
          <div onclick="LM.localSystem.download()">Save</div>
          <div onclick="LM.localSystem.openFile()">Load</div>
          <input id="inp" type='file' style="display:none;" onchange="LM.localSystem.readFile(event)" onclick="this.value=null;" />
          <div onclick="LM.codeMirror.copyShareableSourceCodeLink()">Share</div>
          <hr class="HorizontalRule">
          <div onclick="LM.stlCreator.createASCIISTL()">Export STL</div>
        </div>
      </div>
      <div class="menu-dropdown">
        <div class="menu-dropdown-button">Editor</div>
        <div class="menu-dropdown-content">
          <div onclick="LM.codeMirror.setValue('')">Clear</div>
          <hr class="HorizontalRule">
          <div onclick="LM.codeMirror.undo()">Undo</div>
          <div onclick="LM.codeMirror.redo()">Redo</div>
          <hr class="HorizontalRule">
          <div onclick="LM.codeMirror.increaseEditorFontSize()">Zoom In</div>
          <div onclick="LM.codeMirror.decreaseEditorFontSize()">Zoom Out</div>
          <div onclick="LM.codeMirror.resetEditorFontSize()">Reset Zoom</div>
          <hr class="HorizontalRule">
          <div onclick="let chbx = document.getElementById('toggleHoverHint'); chbx.click(); LM.codeMirror.setOption('textHover', (chbx.checked? true : false))"><input checked type="checkbox" id="toggleHoverHint" style="pointer-events:none"> Hints on Hover</div>
        </div>
      </div>
      <div class="menu-dropdown">
        <div class="menu-dropdown-button">Sketch</div>
        <div class="menu-dropdown-content">
          <div onclick="LM.interpreter.setup()">Run</div>
          <div onclick="LM.interpreter.setup('')">Stop</div>
          <hr class="HorizontalRule">
          <div onclick="document.getElementById('colorPicker').click()">Default Color<input id="colorPicker" type="color" value="#ffffff" onchange="LM.logo.setDefaultHexColor(this.value);"/></div>
        </div>
      </div>
      <div class="menu-dropdown">
        <div class="menu-dropdown-button" onmouseover="LM.demoPrograms.populateExamples(this)">Examples</div>
        <div class="menu-dropdown-content"></div>
      </div>
      <div class="menu-dropdown">
        <div class="menu-dropdown-button">Help</div>
        <div class="menu-dropdown-content">
          <div onclick="window.open('assets/Documentation.pdf','_blank')">Documentation</div>
          <div onclick="window.open('https://github.com/kostasKar/logoMor','_blank')">GitHub Page</div>
        </div>
      </div>
    </div>

    <div id="editorPanelheader" class="areaDiv">
      <label class="areaTitle brightText">Source Code Editor</label>
      <input type="text" id="projectNameInputField" placeholder="Sketch Name" onClick="this.select();">
    </div>

    <div id="sourceCodeContainer" class="rtl">
      <textarea class="codeFont" id="sourceCodeTextArea" spellcheck="false" placeholder="Logo code here..."></textarea>
    </div>
    <div id="pull-tab"></div>

    <div class="areaDiv fixedWidth" id="movesLimitDiv">
      <button title="Start debugging" class="btn smallButton" id="debugButton" onclick="LM.interpreter.setup(null, true)">Debug</button><!--
      --><button title="Run to breakpoint" class="btn smallButton" id="debugContinueButton" onclick="LM.debugger.continuePressed()" disabled>Continue</button><!--
      --><button title="Run next command" class="btn smallButton" id="debugStepButton" onclick="LM.debugger.stepPressed()" disabled>Step</button>
      <input  id="movesLimitInput" type="number" name="quantity" min="0" placeholder="Infinite" onchange="LM.interpreter.movesLimit = this.value || Infinity; LM.retainMode.fireExecution()">
      <label title="Maximum number of move commands per frame" class="subtleText1" id="movesLimitLabel">Moves Limit:</label>
    </div>

    <div class="areaDiv fixedWidth" id = "buttonDiv">
      <button class="btn bigButton" id="playButton" onclick="LM.interpreter.setup()">Run</button><!-- just to get rid of the space between the inline-blocks
        --><button class="btn bigButton" id="stopButton" onclick="LM.interpreter.setup(''); LM.sounds.stopAllAudio()">Stop</button>
    </div>

    <div class="areaDiv fixedWidth" id="consoleDiv">
      <label title="Program output (print command), system and error messages dispayed here" class="areaTitle brightText">Console</label>
      <div readonly id="consoleTextArea" class="codeFont brightText"></div>
    </div>

    <div class="areaDiv fixedWidth" id="variablesDiv">
      <label title="Manipulate the initial value of any global variable defined in the source code. Changes can be observed on the drawing in real time" class="areaTitle brightText">Variables Manipulators</label>
      <div class="dropdown">
        <button class="dropbtn btn mediumButton" id="slidersAddButton" onclick="LM.variableManipulatorsSliders.showVariablesNames()" disabled>Add</button><!--
        --><button class="dropbtn btn mediumButton" id="slidersClearButton" onclick="LM.variableManipulatorsSliders.clearSliders()" disabled>Clear</button>
        <div id="variablesNamesDropdown" class="dropdown-content">
        </div>
      </div>
    </div>

    <div class="areaDiv fixedWidth" id="assetsDiv">
      <label title="Import models, images or sounds from local disk" class="areaTitle brightText">Assets</label>
      <button id="assetsAddButton" class="btn mediumButton dropbtn" onclick="toggleAddAssetsDropdown()">Add</button>
      <div id="assetsDropDown" class="dropdown-content menu-dropdown-content brightText">
        <div title="Import an .stl or .obj 3D model file from local disk" onclick="LM.models.openModelFile()">Model</div>
        <div title="Import any image file from local disk" onclick="LM.images.openImageFile()">Image</div>
        <div title="Import any audio file from local disk" onclick="LM.sounds.openSoundFile()">Sound</div>
      </div>
      <div class="areaDiv" id="modelsDiv">
        <input id="modelinp" type='file' style="display:none;" onchange="LM.models.readModelFile(event)" onclick="this.value=null;" accept=".stl,.obj" />
      </div>

      <div class="areaDiv" id="imagesDiv">
        <input id="imageinp" type='file' style="display:none;" onchange="LM.images.readImageFile(event)" onclick="this.value=null;" accept="image/*"/>
      </div>

      <div class="areaDiv" id="soundsDiv">
        <input id="soundinp" type='file' style="display:none;" onchange="LM.sounds.readSoundFile(event)" onclick="this.value=null;" accept="audio/*"/>
      </div>
    </div>
    <script>
      function toggleAddAssetsDropdown(){
        document.getElementById("assetsDropDown").classList.toggle("show");
      }
    </script>


  </div>
</div>


<div id="viewPanelControls">
  <button class="tooltip btn circularButton" id="collapseControlsColumn" onclick="document.getElementById('controlsColumnScroll').classList.toggle('hide')">
    <i class="fa fa-code" aria-hidden="true"></i>
    <span class="tooltiptext left">Code Column</span>
  </button>
  <button class="tooltip btn circularButton" id="saveScreenshot" onclick="LM.localSystem.saveScreenshot()">
    <i class="fa fa-camera" aria-hidden="true"></i>
    <span class="tooltiptext left">Screenshot</span>
  </button>
  <button class="tooltip btn circularButton" id="record" onclick="LM.localSystem.toggleRecording()">
    <i class="fa fa-video" aria-hidden="true"></i>
    <span class="tooltiptext left">Video</span>
  </button>
  <button class="tooltip btn circularButton" id="pause" onclick="LM.retainMode.togglePause()">
    <i class="fa fa-pause" aria-hidden="true"></i>
    <span class="tooltiptext left">Redrawing</span>
  </button>
  <button class="tooltip btn circularButton dropdown-button" id="viewSettings" onclick="toggleViewSettingsDropdown()">
    <i class="fa fa-cog" aria-hidden="true"></i>
    <span class="tooltiptext left">View Settings</span>
  </button>
  <div id="view-settings-dropdown" class="menu-dropdown-content left brightText">
    <div onclick="LM.p5Renderer.fullscreen(!LM.p5Renderer.fullscreen());toggleViewSettingsDropdown()">Fullscreen</div>
    <div onclick="document.getElementById('autoRotate').click()"><input type="checkbox" id="autoRotate" style="pointer-events:none">&nbsp;Auto-Rotate</div>
    <div onclick="document.getElementById('turnsHelpArrows').click()"><input type="checkbox" id="turnsHelpArrows" style="pointer-events:none">&nbsp;Rotation Arrows</div>
    <div onclick="document.getElementById('avatarViewCheckbox').click()"><input type="checkbox" id="avatarViewCheckbox" style="pointer-events:none">&nbsp;Avatar View</div>
    <div onclick="document.getElementById('persistDrawCheckBox').click()"><input type="checkbox" id="persistDrawCheckBox" style="pointer-events:none">&nbsp;Persist Draw</div>
  </div>
  <script>
    function toggleViewSettingsDropdown(){
      let s = document.getElementById("view-settings-dropdown").style;
      if (s.display === "block"){
        s.display = "none";
        document.getElementById("viewSettings").classList.remove("activeButton");
      } else {
        s.display = "block";
        document.getElementById("viewSettings").classList.add("activeButton");
      }
    }
  </script>
</div>


</body>
</html>